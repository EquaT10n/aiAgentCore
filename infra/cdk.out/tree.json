{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.238.0"},"children":{"InfraStack":{"id":"InfraStack","path":"InfraStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.238.0"},"children":{"PdfBucket":{"id":"PdfBucket","path":"InfraStack/PdfBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"InfraStack/PdfBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"lifecycleConfiguration":{"rules":[{"expirationInDays":30,"status":"Enabled"}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true}}}},"Policy":{"id":"Policy","path":"InfraStack/PdfBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"InfraStack/PdfBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"PdfBucketFA9E115A"},"policyDocument":{"Statement":[{"Action":"s3:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":[{"Fn::GetAtt":["PdfBucketFA9E115A","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PdfBucketFA9E115A","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}}}}}}},"QaRecordsTable":{"id":"QaRecordsTable","path":"InfraStack/QaRecordsTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"InfraStack/QaRecordsTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"record_id","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"record_id","keyType":"HASH"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"InfraStack/QaRecordsTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.238.0"}}}},"RuntimeImageRepo":{"id":"RuntimeImageRepo","path":"InfraStack/RuntimeImageRepo","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.Repository","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"InfraStack/RuntimeImageRepo/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.CfnRepository","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECR::Repository","aws:cdk:cloudformation:props":{"imageScanningConfiguration":{"scanOnPush":true},"repositoryName":"ai-agentcore-runtime"}}}}},"AgentRuntimeExecutionRole":{"id":"AgentRuntimeExecutionRole","path":"InfraStack/AgentRuntimeExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"InfraStack/AgentRuntimeExecutionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"bedrock-agentcore.amazonaws.com"}}],"Version":"2012-10-17"},"description":"Execution role for AgentCore runtime container."}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"InfraStack/AgentRuntimeExecutionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"InfraStack/AgentRuntimeExecutionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["bedrock:InvokeModel","bedrock:InvokeModelWithResponseStream"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":bedrock:",{"Ref":"AWS::Region"},"::foundation-model/anthropic.claude-3-5-sonnet-20241022-v2:0"]]}},{"Action":"dynamodb:PutItem","Effect":"Allow","Resource":{"Fn::GetAtt":["QaRecordsTableE93DE4B3","Arn"]}},{"Action":["s3:PutObject","s3:GetObject"],"Effect":"Allow","Resource":{"Fn::Join":["",[{"Fn::GetAtt":["PdfBucketFA9E115A","Arn"]},"/pdf/*"]]}}],"Version":"2012-10-17"},"policyName":"AgentRuntimeExecutionRoleDefaultPolicy27320ADC","roles":[{"Ref":"AgentRuntimeExecutionRole21587064"}]}}}}}}},"AgentRuntime":{"id":"AgentRuntime","path":"InfraStack/AgentRuntime","constructInfo":{"fqn":"aws-cdk-lib.aws_bedrockagentcore.CfnRuntime","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::BedrockAgentCore::Runtime","aws:cdk:cloudformation:props":{"agentRuntimeArtifact":{"containerConfiguration":{"containerUri":{"Fn::Join":["",[{"Fn::Select":[4,{"Fn::Split":[":",{"Fn::GetAtt":["RuntimeImageRepo37B0A31B","Arn"]}]}]},".dkr.ecr.",{"Fn::Select":[3,{"Fn::Split":[":",{"Fn::GetAtt":["RuntimeImageRepo37B0A31B","Arn"]}]}]},".",{"Ref":"AWS::URLSuffix"},"/",{"Ref":"RuntimeImageRepo37B0A31B"},":latest"]]}}},"agentRuntimeName":"ai-agentcore-runtime","environmentVariables":{"MODEL_ID":"anthropic.claude-3-5-sonnet-20241022-v2:0","TABLE_NAME":{"Ref":"QaRecordsTableE93DE4B3"},"BUCKET_NAME":{"Ref":"PdfBucketFA9E115A"},"PDF_URL_EXPIRES":"600"},"networkConfiguration":{"networkMode":"PUBLIC"},"roleArn":{"Fn::GetAtt":["AgentRuntimeExecutionRole21587064","Arn"]}}}},"AgentRuntimeEndpoint":{"id":"AgentRuntimeEndpoint","path":"InfraStack/AgentRuntimeEndpoint","constructInfo":{"fqn":"aws-cdk-lib.aws_bedrockagentcore.CfnRuntimeEndpoint","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::BedrockAgentCore::RuntimeEndpoint","aws:cdk:cloudformation:props":{"agentRuntimeId":{"Fn::GetAtt":["AgentRuntime","AgentRuntimeId"]},"description":"Primary endpoint for ai-agentcore runtime.","name":"prod"}}},"PdfBucketName":{"id":"PdfBucketName","path":"InfraStack/PdfBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.238.0"}},"PdfBucketArn":{"id":"PdfBucketArn","path":"InfraStack/PdfBucketArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.238.0"}},"QaTableName":{"id":"QaTableName","path":"InfraStack/QaTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.238.0"}},"QaTableArn":{"id":"QaTableArn","path":"InfraStack/QaTableArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.238.0"}},"RuntimeImageRepositoryName":{"id":"RuntimeImageRepositoryName","path":"InfraStack/RuntimeImageRepositoryName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.238.0"}},"RuntimeImageRepositoryUri":{"id":"RuntimeImageRepositoryUri","path":"InfraStack/RuntimeImageRepositoryUri","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.238.0"}},"AgentRuntimeArn":{"id":"AgentRuntimeArn","path":"InfraStack/AgentRuntimeArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.238.0"}},"AgentRuntimeId":{"id":"AgentRuntimeId","path":"InfraStack/AgentRuntimeId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.238.0"}},"AgentRuntimeEndpointArn":{"id":"AgentRuntimeEndpointArn","path":"InfraStack/AgentRuntimeEndpointArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.238.0"}},"AgentRuntimeEndpointId":{"id":"AgentRuntimeEndpointId","path":"InfraStack/AgentRuntimeEndpointId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.238.0"}},"AgentRuntimeEndpointName":{"id":"AgentRuntimeEndpointName","path":"InfraStack/AgentRuntimeEndpointName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.238.0"}},"AgentRuntimeEndpointOutput":{"id":"AgentRuntimeEndpointOutput","path":"InfraStack/AgentRuntimeEndpointOutput","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.238.0"}},"AgentRuntimeEndpointInvokeUrl":{"id":"AgentRuntimeEndpointInvokeUrl","path":"InfraStack/AgentRuntimeEndpointInvokeUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.238.0"}},"InvokePath":{"id":"InvokePath","path":"InfraStack/InvokePath","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.238.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"InfraStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"Default":{"id":"Default","path":"InfraStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.238.0"}},"Condition":{"id":"Condition","path":"InfraStack/CDKMetadata/Condition","constructInfo":{"fqn":"aws-cdk-lib.CfnCondition","version":"2.238.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"InfraStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.238.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"InfraStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.238.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"}}}}}